/*1356105612,173217321*/

if (self.CavalryLogger) { CavalryLogger.start_js(["TAvgn"]); }

__d("ContextualHelpSearchController",["event-extensions","AsyncRequest","DOM","CSS","Input","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('DOM'),i=b('CSS'),j=b('Input'),k=b('copyProperties'),l=350;function m(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}k(m.prototype,{init:function(n,o,p,q,r){this.loader=n;this.search_box=o;this.topics_area=p;this.results_area=q;this.clear_button=r;this.typing_listener=Event.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=Event.listen(this.clear_button,'click',this.clearResults.bind(this));this.search_box.focus();},clearResults:function(){this.show(this.topics_area);this._lastQuery='';j.reset(this.search_box);j.focus(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}i.addClass(this.clear_button,'hidden_elem');},update:function(){var n=j.getValue(this.search_box);if(n===this._lastQuery)return;this._lastQuery=n;if(n===''){this.clearResults();return;}this.show(this.loader);var o={query:n,width:this._width||l};this.async_request=new g('/help/ajax/search/').setData(o).setHandler(function(p){this._update(p);}.bind(this));this.async_request.send();},_update:function(n){this.async_request=null;var o=n.getPayload().results;h.setContent(this.results_area,o);this.show(this.results_area);if(j.getValue(this.search_box)===''){this.clearResults();}else i.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(n){var o=[this.loader,this.topics_area,this.results_area];for(var p=0;p<o.length;p++)i.addClass(o[p],'hidden_elem');i.removeClass(n,'hidden_elem');}});e.exports=m;});
__d("PrivacyLiteFlyout",["event-extensions","function-extensions","Animation","Arbiter","ArbiterMixin","AsyncRequest","CSS","DOM","Ease","Selector","Style","Toggler","copyProperties","cx","csx","ge"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Animation'),h=b('Arbiter'),i=b('ArbiterMixin'),j=b('AsyncRequest'),k=b('CSS'),l=b('DOM'),m=b('Ease'),n=b('Selector'),o=b('Style'),p=b('Toggler'),q=b('copyProperties'),r=b('cx'),s=b('csx'),t=b('ge'),u='PrivacyLiteFlyout/expandingSection',v={},w={};function x(ca,da,ea){var fa=da?0:ca.offsetHeight;o.set(ca,'height',fa+'px');o.set(ca,'overflow','hidden');k.show(ca);var ga=da?ca.scrollHeight:0,ha=l.getID(ca);v[ha]&&v[ha].stop();v[ha]=new g(ca).to('height',ga).ondone(function(){v[ha]=null;o.set(ca,'height','');o.set(ca,'overflow','');ga||k.hide(ca);ea();}).duration(Math.abs(ga-fa)*1.5).ease(m.sineOut).go();}var y=null,z=false,aa=false,ba=q({loadBody:function(ca){if(!z&&t('fbPrivacyLiteFlyoutLoading')){z=true;if(!ca)ca=false;new j('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ca}).send();}},renderBody:function(ca){var da=t('fbPrivacyLiteFlyoutLoading');if(da){l.replace(da,ca);ba.inform('load',null,h.BEHAVIOR_STATE);}},hideCleanup:function(ca){h.inform(u);var da=l.scry(ca,"._2va0").forEach(function(ea){k.removeClass(ea,"_2va0");});},registerFlyoutToggler:function(ca,da){y=da;var ea=p.createInstance(ca);ea.setSticky(false);p.listen(['show','hide'],da,function(fa){ba.inform(fa);aa=fa==='show';if(!aa){ba.hideCleanup(ca);ea.hide();}});},registerReminderFlyout:function(ca){if(aa)return;ba.subscribe('show',function(){ca.hide();});ca.show();},isFlyoutVisible:function(){return y&&p.getActive()===y;},exists:function(){return !!l.scry(document.body,"._91j")[0];},setFlyoutVisible:function(ca){ca?p.show(y):p.hide(y);},showSection:function(ca){var da=w[ca],ea=da.chevron,fa=da.sublist_container;h.inform(u,ea);if(ba.inform('expand',ca)!==false){k.removeClass(ea,"_9or");k.addClass(ea,"_9os");x(fa,true,function(){ba.inform('expanded',ca);});}},hideSection:function(ca,da,ea){var fa=w[ca],ga=fa.chevron,ha=fa.sublist_container;if(ea===ga)return;if(ba.inform('collapse',ca)!==false){k.addClass(ga,"_9or");k.removeClass(ga,"_9os");x(ha,false,function(){ba.inform('collapsed',ca);});}},toggleSection:function(ca){var da=w[ca].chevron;p.getInstance(da).hide();if(k.hasClass(da,"_9or")){ba.showSection(ca);new j('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ca}).send();}else ba.hideSection(ca);},registerSection:function(ca,da){w[ca]=da;h.subscribe(u,ba.hideSection.curry(ca));Event.listen(da.section_block,'click',ba.toggleSection.curry(ca));},registerInlineHelpOnAudienceChange:function(ca,da,ea){n.subscribe('select',function(fa,ga){if(ga.selector!=ca)return;k.addClass(da,"_2va0");if(ea)new j('/ajax/privacy/privacy_lite/kill_intro').send();});},registerInlineHelpXOutOnClick:function(ca,da){Event.listen(ca,'click',k.addClass.curry(da,"_9p0"));},registerBlockUnhideOnFocus:function(ca,da){Event.listen(ca,'focus',k.show.curry(da));},registerMessageFilterSettingOnClick:function(ca,da){var ea=l.find(ca,"._fv0");Event.listen(ca,'click',function(){if(ea.checked)new j('/ajax/mercury/change_filtering_type.php').setData({filtering_type:da,source:'privacy_lite'}).send();});}},i);e.exports=ba;});
__d("PrivacyLiteFlyoutHelp",["event-extensions","Arbiter","ContextualHelpSearchController","CSS","DOM","Parent","copyProperties","cx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ContextualHelpSearchController'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('copyProperties'),m=b('cx'),n,o;function p(q,r,s,t,u){this._width=315;o=j.find(r,'input');var v=j.create('div');this.init(q,o,v,s,t);n=k.byClass(r,"_8-a");Event.listen(u,'click',this._hideSearch.bind(this));g.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));}p.registerShow=function(q){Event.listen(q,'click',function(){i.addClass(n,"_aw6");o.focus();});};l(p.prototype,new h(),{_hideSearch:function(){this.clearResults();i.removeClass(n,"_aw6");},show:function(q){if(q===this.topics_area){i.removeClass(n,"_aw7");return;}else if(q===this.loader){i.addClass(n,"_aw7");i.hide(this.results_area);}else i.hide(this.loader);i.show(q);}});e.exports=p;});
__d("ViewasChromeBar",["event-extensions","Arbiter","AsyncRequest","CSS","DOM","Input","ModalMask","PageTransitions","Parent","cx","csx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('Input'),l=b('ModalMask'),m=b('PageTransitions'),n=b('Parent'),o=b('cx'),p=b('csx'),q='ViewasChromeBar/initialized',r=null,s=false;function t(w){g.subscribe(q,w);}function u(w){i.addClass(w,"_7g7");var x=j.find(w,"._7g0");k.focus(j.find(x,'.textInput'));}var v={initChromeBar:function(w){if(s)return;r=w;s=true;g.inform(q,null,g.BEHAVIOR_STATE);},update:function(w,x){t(function(){j.setContent(r,w);if(x)new h('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(w){Event.listen(w,'click',u.curry(n.byClass(w,"_7f-")));},registerFlyoutModalMask:function(){l.show();m.registerHandler(l.hide,10);}};e.exports=v;});
/*1355718331,173214271*/

if (self.CavalryLogger) { CavalryLogger.start_js(["X6PG9"]); }

__d("PagesAdminPanel",["Animation","AsyncRequest","Class","CSS","DOMScroll","Tour","TimelineMainScrubber","$","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('AsyncRequest'),i=b('Class'),j=b('CSS'),k=b('DOMScroll'),l=b('Tour'),m=b('TimelineMainScrubber'),n=b('$'),o=b('copyProperties'),p=b('ge');function q(r,s){this.admin_panel=r;this.jumpstart=s;q._instance=this;this.init();}o(q,{PANEL_BODY_HEIGHT:430,ANIMATION_TIME_MS:250});o(q.prototype,{init:function(){},hideJumpstart:function(){j.show(this.admin_panel);j.hide(this.jumpstart);}});q.hideJumpstart=function(){this._instance.hideJumpstart();};q.show=function(r,s){if(p('admin_panel')&&j.shown('admin_panel_body')){k.scrollTo(n('admin_panel'),true);return;}var t=n('admin_panel'),u=n('admin_panel_body');l.getInstance().hideOpenDialog();j.show(u);p('admin_panel_menu_buttons_test')&&j.show(n('admin_panel_menu_buttons_test'));if(s){u.style.height=q.PANEL_BODY_HEIGHT+'px';}else{u.style.height=0;new g(u).to('height',q.PANEL_BODY_HEIGHT).duration(q.ANIMATION_TIME_MS).go();k.scrollTo(t,true);}new h('/ajax/pages/admin_panel/collapse.php').setData({pid:r,collapsed:false,in_tour:s}).setMethod('POST').send();};q.hide=function(r,s){if(p('admin_panel')&&!j.shown('admin_panel_body'))return;var t=n('admin_panel_body');l.getInstance().hideOpenDialog();if(s){t.style.height=0;j.hide(t);}else new g(t).to('height',0).hide().duration(q.ANIMATION_TIME_MS).go();p('admin_panel_menu_buttons_test')&&j.hide(n('admin_panel_menu_buttons_test'));new h('/ajax/pages/admin_panel/collapse.php').setData({pid:r,collapsed:true,in_tour:s}).setMethod('POST').send();};e.exports=q;});
__d("legacy:PagesAdminPanel",["PagesAdminPanel"],function(a,b,c,d){a.PagesAdminPanel=b('PagesAdminPanel');},3);
__d("FileUploadTarget",["AsyncUploadRequest","DragDropFileUpload","DragDropTarget","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('AsyncUploadRequest'),h=b('DragDropFileUpload'),i=b('DragDropTarget'),j=b('copyProperties'),k=b('emptyFunction');function l(m,n){var o=(function(p){var q=new g(n).setFiles({file:p}).setRelativeTo(m).setStatusElement(m);q.subscribe('complete',function(r,s){this.onCompleteCallback(s);}.bind(this));q.send();}).bind(this);this.dragDropTarget=new i(m).setOnFilesDropCallback(function(p){p.length&&this.asyncProcess(p,function(q){q.length&&o(q);});}.bind(this));this.asyncProcess=function(p,q){q(p);};this.preprocess=function(p){return p;};this.onCompleteCallback=k;}j(l.prototype,{setPreprocessor:function(m){this.preprocess=m;return this;},setAsyncProcessor:function(m){this.asyncProcess=m;return this;},onComplete:function(m){this.onCompleteCallback=m;return this;},activate:function(){if(!h.isSupported())return;this.dragDropTarget.setFileFilter(this.preprocess).enable();}});e.exports=l;});
__d("SinglePictureUploadTarget",["Bootloader","Dialog","ErrorDialog","FileUploadTarget","copyProperties","emptyFunction","htmlSpecialChars","tx"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Dialog'),i=b('ErrorDialog'),j=b('FileUploadTarget'),k=b('copyProperties'),l=b('emptyFunction'),m=b('htmlSpecialChars'),n=b('tx');function o(p,q){this.fileUploadTarget=new j(p,q);this.preprocessCallback=l;this.oncompleteCallback=l;this.afterSuccessCallback=l;this.maxWidth=null;this.maxHeight=null;}k(o.prototype,{setPreprocessCallback:function(p){this.preprocessCallback=p;return this;},setOncompleteCallback:function(p){this.oncompleteCallback=p;return this;},setAfterSuccessCallback:function(p){this.afterSuccessCallback=p;return this;},setMaximumDimensions:function(p,q){this.maxWidth=p;this.maxHeight=q;return this;},activate:function(){var p=function(t){return m(t.name);},q=(function(t){if(t.length>1){i.show("Upload Error",n._("You can only select {max-photos} photos to upload to this album.  Only the first {max-photos} photo you selected will be uploaded.",{'max-photos':1}));t=[t[0]];}var u=t[0];if(!u.type.match(/^image\//)){i.show("Upload Error",n._("We could not understand the contents of {filename}.  Make sure it is a jpg, gif, or png formatted image.",{filename:p(u)}));return [];}this.preprocessCallback(t);return t;}).bind(this),r=(function(t,u){var v=1024*1024*16,w=1024*1024*1,x=function(z){if(z.size>v){i.show("Upload Error",n._("{filename} is too large. Please resize your photo to under\n                     8000x8000 pixels and try again.",{filename:p(t[0])}));u([]);}else u([z]);},y=t[0];if((y.size<w)||(!this.maxWidth&&!this.maxHeight)){x(y);}else g.loadModules(['ImageExif','ImageResizer'],function(z,aa){if(!aa.isSupported()){x(y);return;}var ba=new aa(y,this.maxWidth,this.maxHeight);ba.subscribe('resized',function(ca,da){if(da.size>y.size){x(y);}else x(da);}.bind(this));ba.subscribe('error',function(){x(y);}.bind(this));z.readFromFile(y,function(ca){ca&&ba.setOrientation(ca.Orientation);ba.resize();});});}).bind(this),s=(function(t){var u=t[0];this.oncompleteCallback(u);var v=u.getResponse().getPayload();if(u.isSuccess()){this.afterSuccessCallback(v);}else if(v&&v.__dialog){var w=new h();w._setFromModel(v.__dialog);w.setButtons(h.OK).show();}else i.show(v.error.title,v.error.body);}).bind(this);return this.fileUploadTarget.onComplete(s).setPreprocessor(q).setAsyncProcessor(r).activate();}});e.exports=o;});
__d("TimelineProfilePic",["Arbiter","CSS","Dialog","DOM","HTML","Run","$","ge","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('Dialog'),j=b('DOM'),k=b('HTML'),l=b('Run'),m=b('$'),n=b('ge'),o=b('copyProperties');function p(q,r,s,t){p.destroyInstance();p._instance=this;this.leavingMessage=r;this.elemID=s||'fbProfileCover';this.elemClass=t||'.profilePicThumb';this._arbiterTokens=[g.subscribe(q.LOADING,this.startLoading.bind(this)),g.subscribe(q.SUCCESS,this.onUploadSuccess.bind(this))];l.onBeforeUnload(this.onBeforeUnload.bind(this));l.onLeave(this.destroy.bind(this));}o(p,{_instance:null,destroyInstance:function(){this._instance&&this._instance.destroy();}});o(p.prototype,{_setLoadingIndicator:function(q){this._loading=q;h.conditionClass(j.find(m(this.elemID),this.elemClass),'profilePicLoading',q);},destroy:function(){this._arbiterTokens.forEach(function(q){q.unsubscribe();});this._arbiterTokens=[];p._instance=null;},startLoading:function(q,r){this._setLoadingIndicator(r.isLoading);},onUploadSuccess:function(q,r){this._setLoadingIndicator(false);var s=i.getCurrent();if(s)s.hide();j.replace(j.find(m(this.elemID),this.elemClass),k(r.newPic));if(typeof(r.profileId)!==undefined&&typeof(r.headerPicURL)!==undefined){var t=n('profile_pic_header_'+r.profileId);if(t)t.src=r.headerPicURL;}if(n('fbProfilePicSelector'))h.removeClass(m('fbProfilePicSelector'),'fbTimelineNullProfilePicSelector');},onBeforeUnload:function(){if(p._instance===this&&this._loading)return this.leavingMessage;}});e.exports=p;});
__d("timeline-cover-dragdrop-edit",["SinglePictureUploadTarget","TimelineCover"],function(a,b,c,d,e,f){var g=b('SinglePictureUploadTarget'),h=b('TimelineCover'),i=function(){var m=h.getInstance();m.hideLoadingIndicator();},j=function(m){var n=h.getInstance(),o=m.id,p=m.photo_html;n.updateCoverImage(o,p);},k=function(m){h.getInstance().showLoadingIndicator();},l=function(m,n,o,p){new g(m,n).setMaximumDimensions(o,p).setPreprocessCallback(k).setOncompleteCallback(i).setAfterSuccessCallback(j).activate();};f.initialize_timeline_cover_drop_target=l;});
__d("TimelineStar",["event-extensions","Button","CSS","DOM","Parent","Run","TimelineCapsule","Tooltip","URI","csx","cx","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Button'),h=b('CSS'),i=b('DOM'),j=b('Parent'),k=b('Run'),l=b('TimelineCapsule'),m=b('Tooltip'),n=b('URI'),o=b('csx'),p=b('cx'),q=b('tx');function r(w){return i.scry(w,"a._5m-")[0];}var s=null,t=[];function u(w){s=s||function(){t.forEach(function(x){x.remove();});t.length=0;};t.push(w);}var v={STAR_CSS_ONLY:1,STAR_ASYNC_REQUIRED:2,ACTION_STAR:7,ACTION_UNSTAR:8,starUnitFromButton:function(w,x,y){m.set(w,"Remove from highlights");var z=j.byClass(w,'timelineUnitContainer');v.starUnit(z,x,y);},starUnit:function(w,x,y){var z=r(w);if(z){h.addClass(w,"_6q0");return;}var aa=w.parentNode;if(!y)i.setContent(aa,x);h.removeClass(aa,'fbTimelineTwoColumn');h.addClass(aa,'fbTimelineOneColumn');aa.removeAttribute('data-side');aa.setAttribute('data-size','2');m.hide();l.balanceCapsule.curry(aa.parentNode).defer();},unstarUnitFromButton:function(w,x,y){m.set(w,"Highlight");var z=j.byClass(w,'timelineUnitContainer');v.unstarUnit(z,x,y);},unstarUnit:function(w,x,y){var z=r(w);if(z){h.removeClass(w,"_6q0");return;}var aa=w.parentNode;if(!y)i.setContent(aa,x);h.removeClass(aa,'fbTimelineOneColumn');h.addClass(aa,'fbTimelineTwoColumn');aa.setAttribute('data-side','l');aa.setAttribute('data-size','1');m.hide();l.balanceCapsule.curry(aa.parentNode).defer();},listenToButton:function(w,x){if(!w)return;switch(x){case v.STAR_CSS_ONLY:u(Event.listen(w,'click',function(event){m.set(w,"Loading...");if(h.hasClass(w,'async_saving')){event.preventDefault();return;}var z=h.hasClass(w,"_5m-"),aa=j.byClass(w,'timelineUnitContainer'),ba=new n(w.getAttribute('ajaxify')),ca=ba.getQueryData().customize_action,da=ca==v.ACTION_STAR?v.starUnit:v.unstarUnit;if(z){h.toggleClass(w,"_5m_");}else{g.setEnabled.curry(w,false).defer();h.toggleClass(w,'fbTimelineStarButtonSelected');h.toggleClass(w,'selected');}da(aa,null,true);var ea=ca==v.ACTION_STAR?v.ACTION_UNSTAR:v.ACTION_STAR;ba.addQueryData({customize_action:ea});w.setAttribute.bind(w,'ajaxify',ba).defer();}));var y=j.byClass(w,'stat_elem');y&&h.removeClass(y,'stat_elem');break;case v.STAR_ASYNC_REQUIRED:u(Event.listen(w,'click',function(event){m.set(w,"Loading...");}));break;}}};e.exports=v;});
__d("profile-pic-dragdrop-edit",["Arbiter","SinglePictureUploadTarget","TimelineProfilePic"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('SinglePictureUploadTarget'),i=b('TimelineProfilePic');f.initialize_profile_pic_drop_target=function(j,k,l,m){new i(l,m);new h(j,k).setPreprocessCallback(function(n){g.inform(l.LOADING,{isLoading:1},g.BEHAVIOR_STATE);}).setOncompleteCallback(function(){g.inform(l.LOADING,{isLoading:0},g.BEHAVIOR_STATE);}).setAfterSuccessCallback(function(n){g.inform(l.SUCCESS,{newPic:n.photo_html},g.BEHAVIOR_STATE);}).activate();};});
__d("CountButtonCount",["ArbiterMixin","copyProperties","DOM"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('copyProperties'),i=b('DOM');function j(k,l,m){this._root=k;this._count=l;this._max=m;}h(j.prototype,g,{getCount:function(){return this._count;},setCount:function(k){this._count=k;var l=this.getDisplayedValue();i.setContent(this._root,l);this.inform('change',{value:this._count,max:this._max,display:l});return this;},addCount:function(k){this.setCount(this.getCount()+k);return this;},getDisplayedValue:function(k){var l=(this._count>this._max)?'+':'';return Math.max(0,Math.min(this._count,this._max))+l;}});e.exports=j;});
__d("CountButton",["copyProperties","CSS","cx"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('CSS'),i=b('cx'),j={huge:"_4q9",large:"_9x",small:"_9w",hidden:"_9v"};function k(l,m){this._root=l;this._counter=m;this._initEvents();}g(k.prototype,{_initEvents:function(){this._counter.subscribe('change',this._counterChange.bind(this));},_counterChange:function(l,m){h.removeClass(this._root,j.huge);h.removeClass(this._root,j.large);h.removeClass(this._root,j.small);h.removeClass(this._root,j.hidden);var n=m.count>m.max;if(n&&m.max>9){h.addClass(this._root,j.huge);}else if(m.value>9||(n&&m.max>0)){h.addClass(this._root,j.large);}else if(m.value>0){h.addClass(this._root,j.small);}else h.addClass(this._root,j.hidden);},getCounter:function(){return this._counter;}});e.exports=k;});
__d("ProfilePOPAlbumEducationDialog",["event-extensions","AsyncRequest"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h={listen:function(i,j){Event.listen(i,'click',function(){j.show();new g().setURI('/ajax/profile/picture/record_seen_nux/').send();});}};e.exports=h;});
__d("ContextualLayerPositionClassOnContext",["CSS","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('copyProperties'),i=b('cx');function j(l){this._layer=l;}function k(l){var m=l.getAlignment(),n=l.getPosition();if(n==='below'){if(m==='left'){return "_nk";}else if(m==='right'){return "_nl";}else return "_nm";}else if(n==='above'){if(m==='left'){return "_nn";}else if(m==='right'){return "_no";}else return "_np";}else if(n==='left'){return "_nq";}else return "_nr";}h(j.prototype,{_subscription:null,_prevClassName:null,enable:function(){this._subscription=this._layer.subscribe('reposition',this._updateClassName.bind(this));if(this._layer.isShown())this._updateClassName();},disable:function(){this._subscription.unsubscribe();this._subscription=null;if(this._prevClassName){g.removeClass(this._layer.getContext(),this._prevClassName);this._prevClassName=null;}},_updateClassName:function(l,m){var n=this._layer.getContext(),o=k(m);if(this._prevClassName===o)return;g.removeClass(n,this._prevClassName);g.addClass(n,o);this._prevClassName=o;}});e.exports=j;});
/*1355960302,173213725*/

if (self.CavalryLogger) { CavalryLogger.start_js(["s3Fje"]); }

__d("PromotedPostConstants",[],function(a,b,c,d,e,f){var g={SAVE:'boosted_post/save',CANCEL:'boosted_post/cancel',FLYOUT_SHOW:'promoted_post/flyout_show',FLYOUT_HIDE:'promoted_post/flyout_hide',CLOSE:'boosted_post/close',SET_BUDGET:'boosted_post/set_budget',STOP:'boosted_post/stop',RESUME:'boosted_post/resume',ACCOUNT_CHANGE:'boosted_post/account_change',PAY_FOR_PROMOTION:'boosted_post/pay_for_promotion',AUTOPROMOTE_CHANGE:'boosted_post/autopromote_change',FOC_CHANGE:'boosted_post/foc_change',DURATION_CHANGE:'boosted_post/duration_change'};e.exports=g;});
__d("BoostedPostLogging",["EagleEye","AsyncRequest"],function(a,b,c,d,e,f){var g=b('EagleEye'),h=b('AsyncRequest'),i={log:function(j,k){k.event=j;g.log('roe',k);},logClickConversionTracking:function(j,k,l,m){var n={page_id:j};if(k)n.post_id=k;if(l)n.campaign_id=l;if(m)n.campaign_placement=m;new h('/ads/ajax/boosted/convtrack.php').setData(n).send();}};e.exports=i;});
__d("MenuXSeparator",["Class","copyProperties","CSS","DOM","MenuXItemInterface"],function(a,b,c,d,e,f){var g=b('Class'),h=b('copyProperties'),i=b('CSS'),j=b('DOM'),k=b('MenuXItemInterface');function l(m){this.parent.construct(this,m);this._data=m;}g.extend(l,k);h(l.prototype,{render:function(){var m='uiMenuXSeparator';if(this._data.className)m+=' '+this._data.className;return j.create('li',{className:m,role:'separator'});}});e.exports=l;});
__d("BoostedPostPostWidget",["event-extensions","Arbiter","ArbiterMixin","AsyncRequest","CSS","DOM","DOMScroll","DOMDimensions","BoostedPostLogging","PromotedPostConstants","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('AsyncRequest'),j=b('CSS'),k=b('DOM'),l=b('DOMScroll'),m=b('DOMDimensions'),n=b('BoostedPostLogging'),o=b('PromotedPostConstants'),p=b('copyProperties'),q={},r=0;function s(t,u,v,w,x,y,z,aa,ba,ca,da,ea){this._popover=t;this._popoverButton=u;this._loadingMenu=v;this._pageId=w;this._postId=x;this._isBoosted=y;this._campaignId=z;this._campaignPlacement=aa;this._createLogWaitingForFlyout=false;this._placement=ea;this._instanceId=r++;q[this._instanceId]=this;this._flyout=da;this._statusThrobber=null;this._autoOpenPopover=ba;this._additionalLoggingData=ca;this._initialize();}s.setFlyout=function(t,u,v){q[t].setFlyout(u,v);};p(s.prototype,h,{_fetched:false,_mouseoverListener:null,_firstClickListener:null,_initialize:function(){this.loggingData={page_id:this._pageId,post_id:this._postId};if(this._flyout){this._setFlyoutInstance(this._flyout);}else this._mouseoverListener=Event.listen(this._popoverButton,'mouseover',this._fetchFlyout.bind(this));this._firstClickListener=Event.listen(this._popoverButton,'click',this._onFirstClick.bind(this));this._popover.subscribe('show',function(){g.inform(o.FLYOUT_SHOW);if(this._autoOpenPopover)return;if(!this._flyout&&!this._isBoosted){this._createLogWaitingForFlyout=true;return;}this._logOnFlyoutOpen();}.bind(this));this._popover.subscribe('hide',function(){g.inform(o.FLYOUT_HIDE);this.inform(o.FLYOUT_HIDE);}.bind(this));this._maybeAutoOpen();},_fromComposerAutoOpen:function(){var t=false;g.subscribe('TimelineComposer/on_after_publish',function(u,v){if(t)return;t=true;var w=false;this._popover.subscribe('show',function(){if(w)return;w=true;var x=0;if(this._flyout)x=m.getElementDimensions(this._flyout.getRoot()).height;l.scrollTo(v,750,false,x);}.bind(this),g.SUBSCIBE_NEW);this._popoverButton.click();}.bind(this),g.SUBSCIBE_NEW);},_maybeAutoOpen:function(){if(!this._autoOpenPopover)return;if(this._placement=='from_composer'){this._fromComposerAutoOpen();return;}if(this._placement=='permalink'){this.loggingData.campaign_id=this._campaignId;this.loggingData.budget_remaining=this._additionalLoggingData.budget_remaining;n.log('clicked_after_budget_notification',this.loggingData);}this._popoverButton.click();l.scrollTo(this._popoverButton,1000);},_createListener:function(t,u){this._showThrobberAndDisableFlyoutButtons();this.loggingData.budget=u.formData.boosted_post_budget;n.log('timeline_create_save',this.loggingData);new i('/ads/ajax/boosted/edit.php').setData({status:true,account_id:u.formData.boosted_post_account_id,budget:u.formData.boosted_post_budget,campaign_length:u.formData.boosted_post_campaign_length,currency:u.formData.boosted_post_currency,foc_enabled:u.formData.boosted_post_enable_foc,page_id:this._pageId,post_id:this._postId}).setMethod('POST').setHandler(this._changeStatusHandler.bind(this)).send();},_stopLinkListener:function(t,u){if(u===this._flyout._flyout.id){n.log('timeline_stop_boosting',this.loggingData);this._changeStatus(false);}},_resumeLinkListener:function(t,u){if(u===this._flyout._flyout.id){n.log('timeline_resume_boosting',this.loggingData);this._changeStatus(true);}},_cancelButtonListener:function(t,u){this._popover.hideLayer();},_setBudgetListener:function(t,u){this._changeStatusHandler(u);},_payForPromotionListener:function(t,u){this._showThrobberAndDisableFlyoutButtons();new i('/ads/ajax/boosted/edit.php').setData({page_id:this._pageId,post_id:this._postId,account_id:this._flyout.getAccountID(),create_ads:true}).setMethod('POST').setHandler(this._changeStatusHandler.bind(this)).send();},_showThrobberAndDisableFlyoutButtons:function(){this._statusThrobber&&j.show(this._statusThrobber);this._flyout.setButtonsEnabled(false);},_changeStatus:function(t){this._statusThrobber&&j.show(this._statusThrobber);new i('/ads/ajax/boosted/edit.php').setData({status:t,page_id:this._pageId,post_id:this._postId}).setMethod('POST').setHandler(this._changeStatusHandler.bind(this)).send();},_initializeFlyoutListeners:function(){this._flyout.subscribe(o.SAVE,this._createListener.bind(this));this._flyout.subscribe(o.CANCEL,this._cancelButtonListener.bind(this));g.subscribe(o.STOP,this._stopLinkListener.bind(this));g.subscribe(o.RESUME,this._resumeLinkListener.bind(this));this._flyout.subscribe(o.CLOSE,this._cancelButtonListener.bind(this));this._flyout.subscribe(o.SET_BUDGET,this._setBudgetListener.bind(this));this._flyout.subscribe(o.PAY_FOR_PROMOTION,this._payForPromotionListener.bind(this));},_onFirstClick:function(){if(this._firstClickListener){this._firstClickListener.remove();this._firstClickListener=null;}if(!this._flyout){this._popover.setLayerContent(this._loadingMenu.getRoot());this._fetchFlyout();}if(!this._isBoosted&&!this._autoOpenPopover)n.logClickConversionTracking(this._pageId,this._postId,this._campaignId,this._campaignPlacement);},_fetchFlyout:function(){if(this._fetched)return;new i('/ads/ajax/boosted/post_widget.php').setData({pmid:this._instanceId,page_id:this._pageId,post_id:this._postId}).send();this._fetched=true;if(this._mouseoverListener){this._mouseoverListener.remove();this._mouseoverListener=null;}},_changeStatusHandler:function(t){this._popover.hideLayer();k.empty(this._flyout);k.replace(this._popoverButton,t.payload);this._popoverButton=t.payload;},_setFlyoutInstance:function(t){this._flyout=t;this._initializeFlyoutListeners();this._popover.subscribe('init',function(){var u=this._popover.getLayer().getRoot();this._statusThrobber=k.scry(u,'.statusThrobber')[0];}.bind(this));if(this._createLogWaitingForFlyout){this._logOnFlyoutOpen();this._createLogWaitingForFlyout=false;}},setFlyout:function(t,u){this._popover.setLayerContent(t);this._setFlyoutInstance(u);},_logOnFlyoutOpen:function(){var t=!this._isBoosted?'timeline_create_flyout_open':'timeline_edit_flyout_open';if(!this._isBoosted)this.loggingData.has_credit_card=this._flyout.userHasPaymentInfo();n.log(t,this.loggingData);}});e.exports=s;});
__d("PostInsightsFlyout",["event-extensions","AsyncRequest","copyProperties","HoverFlyout"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('copyProperties'),i=b('HoverFlyout'),j={},k=200;function l(m,n,o){this._pageID=m;this._postID=n;this._node=o;this._pending=false;this._mouseOn=false;this._flyout=null;this._mouseEnterListener=Event.listen(this._node,'mouseenter',this._fetchFlyout.bind(this));this._mouseLeaveListener=Event.listen(this._node,'mouseleave',this._onMouseLeave.bind(this));j[this._postID]=this;}h(l,{setFlyout:function(m,n){this._pending=false;var o=j[m];o&&o.onFlyoutSet(n);}});h(l.prototype,{_fetchFlyout:function(){this._mouseOn=true;if(this._pending||this._flyout)return;this._pending=true;var m={context_id:this._node.id,page_id:this._pageID,post_id:this._postID};new g().setURI('/insights/ajax/post_insights_widget.php').setData(m).send();},_onMouseLeave:function(){this._mouseOn=false;},onFlyoutSet:function(m){if(!this._flyout){this._mouseEnterListener&&this._mouseEnterListener.remove();this._mouseLeaveListener&&this._mouseLeaveListener.remove();this._flyout=new i(m,this._node,k,k);if(this._mouseOn)this._flyout.showFlyout(this._node,true);}}});e.exports=l;});
__d("Messaging",["AsyncRequest","DOM","Env","HTML","MercuryEmoji","MessagingEvents","URI","createArrayFrom","emptyFunction"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DOM'),i=b('Env'),j=b('HTML'),k=b('MercuryEmoji'),l=b('MessagingEvents'),m=b('URI'),n=b('createArrayFrom'),o=b('emptyFunction');function p(r,s){if(!h.isTextNode(r)){var t=n(r.childNodes);for(var u=0;u<t.length;u++)p(t[u],s);return;}var v=r.nodeValue;if(s)v=r.nodeValue.replace(/\n/g,' ');var w=k.htmlEmojiAndEmote(v);if(!w||w==r.nodeValue)return;var x=j(w).getNodes();if(!x||!x.length)return;for(var y=x.length;y--;)h.insertAfter(r,x[y]);h.remove(r);}var q={getUserThreadURI:function(r){return m(i.www_base).setPath('/messages/'+r);},getInboxThreadURI:function(r){return m(i.www_base).setPath('/messages/?action=read&tid='+r);},markAsRead:function(r){r=n(r);new g().setURI('/ajax/messaging/async.php').setData({action:'markRead',tids:r}).setMethod('POST').setHandler(o).setErrorHandler(o).send();l.inform('mark-as-read',{tids:r});},markUserThreadAsRead:function(r){new g().setURI('/ajax/messaging/async.php').setData({action:'chatMarkRead',other_user:r}).setMethod('POST').setHandler(o).setErrorHandler(o).send();l.inform('mark-as-read',{chat_ids:[r]});},unsubscribeFromThread:function(r){new g().setURI('/ajax/messaging/async.php').setData({action:'unsubscribe',tids:r}).setMethod('POST').setHandler(o).setErrorHandler(o).send();},emojiAndEmoteContent:function(r,s){for(var t=0;t<r.length;t++)p(r[t],s);}};e.exports=q;});
__d("legacy:Messaging",["Messaging"],function(a,b,c,d){a.Messaging=b('Messaging');},3);
__d("InlineFriendInviter",["event-extensions","AsyncRequest","CSS","$","DOM","DataStore","ge"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('CSS'),i=b('$'),j=b('DOM'),k=b('DataStore'),l=b('ge'),m={sendInvite:function(n,o,p,q){new g().setURI('/ajax/pages/invite/send_single/').setData({page_id:n,invitee:o,elem_id:p,action:q}).send();h.addClass(p,'yellow');h.hide(j.find(i(p),'.button'));},setupScrollEvents:function(n,o){var p=j.find(n,'div.uiScrollableAreaWrap');Event.listen(p,'scroll',function(event){this.onScrollEvent(n,o);}.bind(this));},onScrollEvent:function(n,o){var p=k.get(n,'ScrollableArea');if(p&&!p.requestPending&&!p.noMoreResults&&p.isScrolledToBottom()){p.requestPending=true;var q=l(n,'.uiMorePager'),r=j.find(n,'.inlineFriendInviterList'),s=r.getAttribute('meta');new g().setURI('/ajax/pages/invite/get.php').setData({pageID:o,offset:s}).setStatusElement(q).setHandler(this.onRequestFinished.bind(this,n)).setErrorHandler(this.onRequestFinished.bind(this,n)).send();}},onRequestFinished:function(n,o){var p=k.get(n,'ScrollableArea');p.requestPending=false;var q=o.getPayload();p.noMoreResults=q.noMoreResults;if(q.offset){var r=j.find(n,'.inlineFriendInviterList');r.setAttribute('meta',q.offset);}}};e.exports=m;});
__d("TypeaheadPreventSubmitOnEnter",["event-extensions","Keys","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Keys'),h=b('copyProperties');function i(j){this._typeahead=j;}h(i.prototype,{_listener:null,enable:function(){var j=this._typeahead.getCore().getElement();this._listener=Event.listen(j,'keypress',function(k){if(Event.getKeyCode(k)==g.RETURN)k.kill();});},disable:function(){this._listener.remove();this._listener=null;}});e.exports=i;});
__d("legacy:PreventSubmitOnEnterTypeaheadBehavior",["TypeaheadPreventSubmitOnEnter"],function(a,b,c,d){var e=b('TypeaheadPreventSubmitOnEnter');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.preventSubmitOnEnter=function(f){f.enableBehavior(e);};},3);
__d("TypeaheadSetPhotoOnSelect",["event-extensions","function-extensions","CSS","DOM","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('CSS'),h=b('DOM'),i=b('copyProperties');function j(k){this._typeahead=k;}i(j.prototype,{_eventListener:null,_subscription:null,enable:function(){var k=h.scry(this._typeahead.getElement(),'.photo')[0];if(k){if(!h.isNodeOfType(k,'img')){var l=h.create('img',{className:k.className});h.replace(k,l);k=l;}var m=g.hide.curry(k),n=g.show.curry(k);this._eventListener=Event.listen(k,{load:n,error:m,abort:m});this._subscription=this._typeahead.subscribe('select',function(o,p){var q=p.selected.photo||this._typeahead.view.fallbackPhoto;q?k.setAttribute('src',q):m();}.bind(this));}},disable:function(){this._eventListener.remove();this._eventListener=null;this._typeahead.unsubscribe(this._subscription);this._subscription=null;}});e.exports=j;});
__d("legacy:SetPhotoOnSelectTypeaheadBehavior",["TypeaheadSetPhotoOnSelect"],function(a,b,c,d){var e=b('TypeaheadSetPhotoOnSelect');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.setPhotoOnSelect=function(f){f.enableBehavior(e);};},3);
__d("ShareModeConst",[],function(a,b,c,d,e,f){var g={SELF_PAGE:'selfpage',PAGE:'page',SELF_POST:'self',FRIEND:'friend',GROUP:'group',ALBUM:'album',MESSAGE:'message'};e.exports=g;});
__d("SharerSelector",["ArbiterMixin","CSS","Input","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('CSS'),i=b('Input'),j=b('copyProperties');function k(l,m,n,o,p){this._selectedMode=n;l&&l.subscribe('change',function(q,r){var s=r.value;i.setValue(m,s);o[this._selectedMode].hideContent();h.hide(p[this._selectedMode]);o[s].showContent();h.show(p[s]);this._selectedMode=s;this.inform('change',this._selectedMode);}.bind(this));}j(k.prototype,g,{getSelectedMode:function(){return this._selectedMode;}});e.exports=k;});
__d("ShareMode",["CSS","Parent","copyProperties","cx","emptyFunction"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('Parent'),i=b('copyProperties'),j=b('cx'),k=b('emptyFunction');function l(m){this._content=m;}i(l.prototype,{showContent:function(){this._content&&g.show(this._content);this.show();},hideContent:function(){this._content&&g.hide(this._content);this.hide();},_getSharerRoot:function(){return h.byClass(this._content,"_b-z");},hideMentionsInput:function(){g.addClass(this._getSharerRoot(),"_c7f");},showMentionsInput:function(){g.removeClass(this._getSharerRoot(),"_c7f");},show:k,hide:k});e.exports=l;});
__d("ShareModeFriendTimeline",["Class","Input","ShareMode","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('Input'),i=b('ShareMode'),j=b('copyProperties');function k(l,m){this.parent.construct(this,l);this._typeaheadInput=m;}g.extend(k,i);j(k.prototype,{show:function(){h.focus(this._typeaheadInput);}});e.exports=k;});
__d("ShareModeGroup",["Class","Input","ShareMode","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('Input'),i=b('ShareMode'),j=b('copyProperties');function k(l,m){this.parent.construct(this,l);this._typeaheadInput=m;}g.extend(k,i);j(k.prototype,{show:function(){h.focus(this._typeaheadInput);}});e.exports=k;});
__d("ShareModeOwnTimeline",["Class","CSS","ShareMode","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('CSS'),i=b('ShareMode'),j=b('copyProperties');function k(l,m){this.parent.construct(this);this._privacyWidget=l;this._boostWidget=m;}g.extend(k,i);j(k.prototype,{show:function(){h.show(this._privacyWidget);this._boostWidget&&h.show(this._boostWidget);},hide:function(){h.hide(this._privacyWidget);this._boostWidget&&h.hide(this._boostWidget);}});e.exports=k;});
__d("Sharer",["event-extensions","CSS","DOM","Input","Selector","ShareModeConst","URI"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('Input'),j=b('Selector'),k=b('ShareModeConst'),l=b('URI'),m={initPrivacyWarning:function(n,o){n.subscribe('selector-change',function(p,q){g.conditionShow(o,q===k.GROUP||q===k.MESSAGE);});},close:function(n){if(typeof(n)=='string'&&n){window.location.href=n;}else{window.close();window.location.href=l().setPath('/').setQueryData().toString();}return false;},listenForCancel:function(n){Event.listen(n,'click',this.close);}};e.exports=m;});
__d("HubsTypeaheadView",["Class","ContextualTypeaheadView","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('ContextualTypeaheadView'),i=b('copyProperties');function j(k,l){this.parent.construct(this,k,l);}g.extend(j,h);i(j.prototype,{render:function(k,l,m){if(this.alwaysRender&&k!==''){var n=k.toLowerCase().trim(),o=false;for(var p=0;p<l.length;p++)if(n==l[p].text.toLowerCase()){o=true;break;}if(!o)l.push({text:k,type:'calltoaction'});}return this.parent.render(k,l,m);}});e.exports=j;});
__d("PagesAnchorDialogEnforcer",["array-extensions","event-extensions","AsyncRequest","Button","DOM","URI","copyProperties"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('AsyncRequest'),h=b('Button'),i=b('DOM'),j=b('URI'),k=b('copyProperties'),l={LOCATION_COMPOSER:1,LOCATION_MILESTONE:2,LOCATION_SPINE:3,LOCATION_EDIT_MENU:4,LOCATION_HIDE_JOINED:5},m=[];function n(t,u,v){var w=i.find(document,t);o(w,u,v);}function o(t,u,v){m.push(Event.listen(t,'click',function(w){new g().setURI('/ajax/timeline/pages/anchor_dialog.php').setData({profile_id:u,location:v}).send();return false;},Event.Priority.URGENT));}function p(t){t.subscribe('changed',function(){h.setEnabled(i.find(document,'label.anchorDialogSaveButton'),'year' in t.getValues());});}function q(t,u){r();switch(u){case l.LOCATION_COMPOSER:case l.LOCATION_MILESTONE:case l.LOCATION_SPINE:case l.LOCATION_EDIT_MENU:case l.LOCATION_HIDE_JOINED:j.getRequestURI().go();break;default:}}function r(){m.forEach(function(t){t.remove();});m=[];}var s={enforceDialogOnNode:o,enforceDialogOnSelector:n,enableSaveButtonOnDateChanged:p,onSuccessForLocation:q};e.exports=s;});
__d("SharerFrame",["ArbiterMixin","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('copyProperties');function i(j){this._sharerSelector=j;this._sharerSelector.subscribe('change',function(k,l){this.inform('selector-change',l);}.bind(this));}h(i.prototype,g,{getSelectedMode:function(){return this._sharerSelector.getSelectedMode();}});e.exports=i;});
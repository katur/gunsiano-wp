/*1355845274,173213727*/

if (self.CavalryLogger) { CavalryLogger.start_js(["aob15"]); }

__d("AppCenterController",["CSS","DOM","URI","event-extensions"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('URI');b('event-extensions');var j={_parameters:{},setPlatform:function(k){h.scry(document.body,'.appCenterPlatforms .platformButton').forEach(function(l){g.conditionClass(l,'selected',g.hasClass(l,'platform_'+k));});this.updateOptions('platform',k);},setFilter:function(k){h.scry(document.body,'.appCenterPlatforms .appCenterMobileFilterButton').forEach(function(l){g.conditionClass(l,'selected',g.hasClass(l,'platform_'+k));});this.updateOptions('platform',k);},setCategory:function(k){var l=h.scry(document.body,'.appCenterPlatforms a');l.forEach(function(m){m.href=m.href.replace(/\/appcenter\/category\/[a-z]+\//,"/appcenter/category/"+k+"/");});},clearSearchInput:function(){h.scry(document.body,'.appCenterSearchBar form').forEach(function(k){h.find(k,'.inputtext').value='';g.hide(k);});},updateOptions:function(k,l){if(k=='platform'&&l=='timeline')return;if(!l){delete this._parameters[k];}else this._parameters[k]=l;var m=h.scry(document.body,'.appCenterCategory a').concat(h.scry(document.body,'.leftNavTitle a')),n=this._parameters;m.forEach(function(o){o.href=new i(o.href).setQueryData(n).toString();});}};e.exports=j;});
__d("MyAppsController",["event-extensions","function-extensions","AsyncRequest","CSS","DOM","DOMQuery","Parent","Run","Vector","$","ge"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('Parent'),l=b('Run'),m=b('Vector'),n=b('$'),o=b('ge'),p=10000,q='/ajax/appcenter/delete.php',r={_init:function(s){this.queue={};Event.listen(s,'click',this.click.bind(this));l.onLeave(this.deleteAllPending.shield(this,true));l.onUnload(this.deleteAllPending.shield(this,false));},click:function(event){var s=k.byAttribute(event.target,'data-appid');if(s){var t=parseInt(s.getAttribute('data-appid'),10);if(h.hasClass(s,'appDeleteButton')){this.queueDelete(t);}else this.undoDelete(t);}},deleteAllPending:function(s){var t=[];for(var u in this.queue){t.push(u);clearTimeout(this.queue[u]);}if(t.length){this.queue={};new g().setMethod('POST').setURI(q).setData({app_ids:t}).setOption('asynchronous',s).send();}},deleteOne:function(s){delete this.queue[s];new g().setMethod('POST').setURI(q).setData({app_ids:[s]}).send();},onDeleteFailures:function(s){s.forEach(function(t){var u=o('app'+t);if(u)h.removeClass(u,'appDeleted');});},onDeleteSuccesses:function(s){s.forEach(function(t){var u=o('app'+t);if(u)i.setContent(j.find(u,'.appUndoDeleteLink'),null);});},queueDelete:function(s){var t=n('app'+s),u=k.byTag(t,'tr'),v=m.getElementDimensions(u).y-43;j.find(t,'.spacer').style.minHeight=v+'px';h.addClass(t,'appDeleted');this.queue[s]=setTimeout(this.deleteOne.bind(this,s),p);},undoDelete:function(s){clearTimeout(this.queue[s]);delete this.queue[s];h.removeClass(n('app'+s),'appDeleted');}};e.exports=r;});
__d("AppCenterSearch",["event-extensions","CSS","DOM","Input","AppCenterSearchConfig"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('Input'),j=c('AppCenterSearchConfig'),k=h.find(j.box,'.inputtext');Event.listen(j.cover,'click',function(){g.show(j.box);k.focus();});Event.listen(k,'blur',function(){if(!i.getValue(k))g.hide(j.box);});e.exports={};});
function AppCenterSideNav(){this.parent.construct(this);}Class.extend(AppCenterSideNav,'FutureSideNav');copyProperties(AppCenterSideNav.prototype,{init:function(a,b,c){this.parent.init(a,b,c);this.leftCol=$('leftCol');this.leftColTop=Vector2.getElementPosition(this.leftCol).y;Event.listen(window,'scroll',this._adjustLeftCol.bind(this));this._adjustLeftCol();},base_path:new RegExp('/appcenter(/.*)?$'),base_endpoint:'/ajax',getItem:function(a){return this.parent.getItem(a)||this._getAppCenterItem(a);},setSelected:function(a){this.setLoading(null);if(this.selected&&!this.selected.defaultItem){this.selected.hideSelected();this.selected.getTop().hideChildren();}this.selected=a;if(this.selected&&!this.selected.defaultItem){this.selected.showSelected();this.selected.getTop().showChildren();}},navigationComplete:function(){window.scrollTo(0,0);this.parent.navigationComplete();},_getAppCenterItem:function(a){if(this._isCurrentPath(a)){var b=this._getItemForPath(a.getPath());if(b)return b;}if(this.base_path.test(a.getPath()))return {endpoint:this.base_endpoint+a.getPath(),defaultItem:true,showLoading:function(){var c=false;DOM.scry(document,'a').forEach(function(e){if(e.href==a&&!CSS.hasClass(e,'ignoreAsyncIndicator')){var f=Parent.byClass(e,'stat_elem');if(f){CSS.addClass(f,'async_saving');c=true;}}});if(!c){var d=ge('contentCol');d&&CSS.addClass(d,'async_saving');}},hideLoading:function(){window.scrollTo(0,0);var c=ge('contentCol');c&&CSS.removeClass(c,'async_saving');DOM.scry(document,'a').forEach(function(d){if(d.href==a&&!CSS.hasClass(d,'ignoreAsyncIndicator')){var e=Parent.byClass(d,'stat_elem');e&&CSS.removeClass(e,'async_saving');}});}};},_adjustLeftCol:function(){var a=Vector2.getElementDimensions(this.leftCol);CSS.conditionClass(this.leftCol,'fixed',this.leftColTop+a.y<=window.innerHeight);},_handleResize:function(){this.parent._handleResize();this._adjustLeftCol();}});
__d("AppSearchTypeaheadRenderer",["CompactTypeaheadRenderer","DOM","Env"],function(a,b,c,d,e,f){var g=b('CompactTypeaheadRenderer'),h=b('DOM'),i=b('Env');function j(k,l){var m=g(k,l);if(!k.type)return m;var n=k.is_external?'_blank':'',o=k.path||'';if(o){if(!(/^https?\:\/\//).test(o))o=i.www_base+o.substr(1);o+=(o.indexOf('?')>0?'&':'?')+'ref=ts';}var p=h.create('a',{href:o,rel:'ignore',target:n});while(m.firstChild)h.appendContent(p,m.firstChild);h.setContent(m,p);return m;}j.className=g.className;e.exports=j;});
__d("AppScreenshotsController",["event-extensions","AsyncRequest","CSS","DOM","KeyEventController","Keys","Style","Vector","copyProperties","csx","cx","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('KeyEventController'),k=b('Keys'),l=b('Style'),m=b('Vector'),n=b('copyProperties'),o=b('csx'),p=b('cx'),q=b('tx'),r=120,s=null;function t(u,v){s=this;this._ids=v;var w=i.scry(u,'div.croppedImg');for(var x=0;x<w.length&&x<v.length;++x)Event.listen(w[x],'click',this.bootstrap.bind(this,x));}n(t,{init:function(u,v){s.init(u,v);}});n(t.prototype,{_ids:[],_root:null,_img:null,_imgSrcs:null,_index:null,_isCached:[],_cacheID:0,bootstrap:function(u){this._index=u;if(this._spotlight){this._open();}else new g('/ajax/appcenter/screenshots.php').setData({ids:this._ids}).send();},init:function(u,v){if(this._spotlight)return;u.subscribe('hide',this._onHide.bind(this));this._spotlight=u;this._root=u.getRoot();this._imgSrcs=v;this._img=i.find(this._root,"img._2xe");this._prevPager=i.find(this._root,"a._2xj");this._nextPager=i.find(this._root,"a._2xk");this._open();},_open:function(){this._spotlight.show();var u=i.find(this._root,"div._2xf");this._handlers=[Event.listen(this._img,'load',this.startCaching.bind(this)),Event.listen(window,'resize',this._onResize.bind(this)),Event.listen(this._root,'click',this._onClick.bind(this)),Event.listen(u,'mousemove',this._onMouseMove.bind(this)),Event.listen(u,'mouseleave',h.addClass.shield(h,this._root,'hidePager')),Event.listen(u,'mouseenter',h.removeClass.shield(h,this._root,'hidePager')),j.registerKey('LEFT',this.go.shield(this,-1)),j.registerKey('RIGHT',this.go.shield(this,1))];this.updateIndex();this._onResize();},_onHide:function(){while(this._handlers.length)this._handlers.pop().remove();},_onClick:function(){if(h.hasClass(this._prevPager,"_2xl")){this.go(-1);}else this.go(1);},go:function(u){this._index=this._index+u;if(this._index<0)this._index=this._imgSrcs.length-1;if(this._index>=this._imgSrcs.length)this._index=0;if(0<=this._index&&this._index<this._imgSrcs.length){this.stopCaching();this.updateIndex();}},updateIndex:function(){this._img.src=this._imgSrcs[this._index];i.setContent(i.find(this._root,"div._2xg"),q._("{position} of {total}",{position:this._index+1,total:this._imgSrcs.length}));},_onResize:function(){var u=Math.ceil(m.getElementDimensions(this._root).y*.8),v=Math.ceil(m.getElementDimensions(this._root).x*.8);l.set(this._img,'max-height',u+"px");l.set(this._img,'max-width',v+"px");},_onMouseMove:function(event){var u=m.getEventPosition(event),v=m.getElementPosition(this._img),w=event.getTarget()===this._prevPager||u.x<=v.x+r;h.conditionClass(this._prevPager,"_2xl",w);h.conditionClass(this._nextPager,"_2xl",!w);},startCaching:function(){if(this._imgSrcs.length>0){var u=this._imgSrcs.length,v=[(this._index-2+u)%u,(this._index+2)%u,(this._index-1+u)%u,(this._index+1)%u];this.stopCaching();this.doCaching(this._cacheID,v);}},stopCaching:function(){this._cacheID=this._cacheID+1;},doCaching:function(u,v){while(v.length>0&&this._cacheID==u){var w=v.pop();if(!this._isCached[w]&&0<=w&&w<this._imgSrcs.length){this._isCached[w]=true;var x=new Image();x.onload=this.doCaching.bind(this,u,v);x.src=this._imgSrcs[w];break;}}}});e.exports=t;});
__d("HorizontalAppListController",["event-extensions","DOM","csx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('csx'),i={init:function(j,k,l,m){var n=g.find(k,"a._2_c"),o=g.find(k,"a._2_d");Event.listen(n,'click',j.page.bind(j,'prev'));Event.listen(o,'click',j.page.bind(j,'next'));j.subscribe('page_start',this._updateNextButton.bind(this));this._carousel=j;this._nextText=g.find(o,'span');this._numDisplay=l;this._numLastSlide=m;},_updateNextButton:function(j,k){var l=(k+1===this._carousel.getNumItems()-1);g.setContent(this._nextText,(l?this._numLastSlide:this._numDisplay)+" \u25B6");}};e.exports=i;});
__d("Carousel",["Animation","Class","CSS","Ease","Locale","Slideshow","Style","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Class'),i=b('CSS'),j=b('Ease'),k=b('Locale'),l=b('Slideshow'),m=b('Style'),n=b('copyProperties'),o=b('cx'),p=k.isRTL()?'right':'left',q=j.sineInOut;function r(s,t){this.parent.construct(this,s,t);this.subscribe('items_updated',this._updateItemState.bind(this));}h.extend(r,l);n(r.prototype,{_updateItemState:function(s,t){this._setContainerPos(s);m.set(this._container,'width',(this._items.length*this._config.width)+'px');},_updateArrowState:function(s){if(!this._config.arrows)return;var t=this._config.wrap,u=this._items.length;i.conditionClass(this._arrowRight,"_2xo",u===1||(!t&&s===u-1));i.conditionClass(this._arrowLeft,"_2xo",u===1||(!t&&s===0));},_animate:function(s,t){this._animating=true;this.inform('page_start',s);new g(this._container).to(p,-s*this._config.width).duration(this._config.animationDuration).ease(q).ondone(t).go();},_setContainerPos:function(s){m.set(this._container,p,-s*this._config.width+'px');},_animateTo:function(s){if(this._animating)return;var t=this._items.length;if((0<=s&&s<t)||!this._config.wrap){var u=(s+t)%t;this._updateArrowState(u);return this._animate(u,this._setCurrent.shield(this,u));}var v=s%t,w=v?t-1:0,x=this._items[t-1];m.set(x,'position','absolute');m.set(x,p,-this._config.width+'px');if(w===0)this._setContainerPos(-1);this._animate(v,function(){m.set(x,'position','static');m.set(x,p,'auto');this._setContainerPos(w);this._setCurrent(w);}.bind(this));}});e.exports=r;});
__d("SlideshowLinks",["event-extensions","CSS","DOM","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('Parent'),j=b('copyProperties'),k=b('csx'),l=b('cx'),m="_2xp";function n(o,p){this._root=o;this._slideshow=p;this._selectedIndex=0;this._init();}j(n.prototype,{_init:function(){this._links=h.scry(this._root,"li._2xs");this._updateLinkCount();Event.listen(this._root,'click',this._clickListener.bind(this));Event.listen(this._root,'mouseenter',this._slideshow.stopAutoplay.bind(this._slideshow));Event.listen(this._root,'mouseleave',this._slideshow.resetAutoplay.bind(this._slideshow));this._slideshow.subscribe('items_updated',this._updateLinkCount.bind(this));this._slideshow.subscribe('page_start',function(o,p){this._updateLinkState(p);}.bind(this));},_clickListener:function(event){var o=event.getTarget(),p=i.byClass(o,"_2xs");if(p)this._slideshow.pageTo(this._links.indexOf(p));},_updateLinkCount:function(){var o=this._links.length,p=this._slideshow.getNumItems(),q;for(q=o;q<p;q++){var r=this._root.firstChild.cloneNode(true);g.removeClass(r,"_2xt");g.removeClass(r,m);h.appendContent(this._root,r);}for(q=o-1;q>p-1;q--)h.remove(this._links[q]);if(p>1){g.removeClass(this._root,'invisible_elem');}else g.addClass(this._root,'invisible_elem');this._links=h.scry(this._root,"li._2xs");this._updateLinkState(this._slideshow.getIndex());},_updateLinkState:function(o){g.removeClass(this._links[this._selectedIndex],m);g.addClass(this._links[o],m);this._selectedIndex=o;}});e.exports=n;});
__d("Slideshow",["event-extensions","ArbiterMixin","CSS","DOM","Locale","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('CSS'),i=b('DOM'),j=b('Locale'),k=b('Parent'),l=b('copyProperties'),m=b('csx'),n=b('cx');function o(p,q){this._root=p;this._config=q;this._currentIndex=0;this._animating=false;this._autoplayTimer=null;this._init();}l(o.prototype,g,{getIndex:function(){return this._currentIndex;},getNumItems:function(){return this._items.length;},page:function(p){if(typeof p==='undefined')p='next';if(p==='next'){if(this._config.wrap||this.getIndex()<this.getNumItems()-1)this._animateTo(this._currentIndex+1);}else if(p==='prev')if(this._config.wrap||this.getIndex()>0)this._animateTo(this._currentIndex-1);},pageTo:function(p){this._animateTo(p,this._setCurrent.shield(this,p));},insert:function(p,q){if(p>this._currentIndex){i.insertAfter(this._items[p-1],q);}else{i.insertBefore(this._items[p],q);this._currentIndex++;}this._items.splice(p,0,q);this._updateArrowState(this._currentIndex);this.inform('items_updated');},push:function(p){this.insert(this._items.length,p);},_init:function(){this._container=i.find(this._root,"ul._2xq");this._items=i.scry(this._container,"li._2xr");if(this._config.arrows){Event.listen(this._root,'click',this._clickListener.bind(this));var p=i.find(this._root,"a._2xw"),q=i.find(this._root,"a._2xx");this._arrowLeft=j.isRTL()?p:q;this._arrowRight=j.isRTL()?q:p;}if(this._config.autoplay){Event.listen(this._root,'mouseenter',this.stopAutoplay.bind(this));Event.listen(this._root,'mouseleave',this.resetAutoplay.bind(this));this.resetAutoplay();}this.subscribe(['page_start','page_end'],function(r,s){h.conditionClass(this._root,"_2xm",r==='page_start');}.bind(this));},_clickListener:function(event){var p=event.getTarget(),q=k.byTag(p,'a');if(q&&!h.hasClass(q,"_2xo"))if(h.hasClass(q,"_2xw")){this.page('next');}else if(h.hasClass(q,"_2xx"))this.page('prev');},_updateArrowState:function(p){if(!this._config.arrows)return;h.conditionClass(this._arrowRight,"_2xo",this._items.length===1);h.conditionClass(this._arrowLeft,"_2xo",this._items.length===1);},_animateTo:function(p){},_setCurrent:function(p){h.removeClass(this._items[this._currentIndex],"_2xn");h.addClass(this._items[p],"_2xn");h.removeClass(this._root,"_2xm");this._currentIndex=p;this._animating=false;this.inform('page_end',p);},resetAutoplay:function(){if(this._config.autoplay){clearTimeout(this._autoplayTimer);this._autoplayTimer=setTimeout(this._autoplay.bind(this),this._config.autoplayTimeout);}},stopAutoplay:function(){clearTimeout(this._autoplayTimer);this._autoplayTimer=null;},_autoplay:function(){this.resetAutoplay();if(this._items.length>1)this.page();}});e.exports=o;});
__d("Ease",[],function(a,b,c,d,e,f){var g={makePowerOut:function(h){return function(i){var j=1-Math.pow(1-i,h);return (j*10000|0)/10000;};},makePowerIn:function(h){return function(i){var j=Math.pow(i,h);return (j*10000|0)/10000;};},makePowerInOut:function(h){return function(i){var j=((i*=2)<1)?Math.pow(i,h)*.5:1-Math.abs(Math.pow(2-i,h))*.5;return (j*10000|0)/10000;};},sineOut:function(h){return Math.sin(h*Math.PI*.5);},sineIn:function(h){return 1-Math.cos(h*Math.PI*.5);},sineInOut:function(h){return -.5*(Math.cos(Math.PI*h)-1);},circOut:function(h){return Math.sqrt(1-(--h)*h);},circIn:function(h){return -(Math.sqrt(1-h*h)-1);},circInOut:function(h){return ((h*=2)<1)?-.5*(Math.sqrt(1-h*h)-1):.5*(Math.sqrt(1-(h-=2)*h)+1);},bounceOut:function(h){if(h<1/2.75){return (7.5625*h*h);}else if(h<2/2.75){return (7.5625*(h-=1.5/2.75)*h+.75);}else if(h<2.5/2.75){return (7.5625*(h-=2.25/2.75)*h+.9375);}else return (7.5625*(h-=2.625/2.75)*h+.984375);},bounceIn:function(h){return 1-g.bounceOut(1-h);},bounceInOut:function(h){return (h<.5)?g.bounceIn(h*2)*.5:g.bounceOut(h*2-1)*.5+.5;},makeElasticOut:function(h,i){h<1&&(h=1);var j=Math.PI*2;return function(k){if(k===0||k===1)return k;var l=i/j*Math.asin(1/h);return h*Math.pow(2,-10*k)*Math.sin((k-l)*j/i)+1;};},makeElasticIn:function(h,i){h<1&&(h=1);var j=Math.PI*2;return function(k){if(k===0||k===1)return k;var l=i/j*Math.asin(1/h);return -(h*Math.pow(2,10*(k-=1))*Math.sin((k-l)*j/i));};},makeElasticInOut:function(h,i){h<1&&(h=1);i*=1.5;var j=Math.PI*2;return function(k){var l=i/j*Math.asin(1/h);return ((k*=2)<1)?-.5*h*Math.pow(2,10*(k-=1))*Math.sin((k-l)*j/i):1+.5*h*Math.pow(2,-10*(k-=1))*Math.sin((k-l)*j/i);};},makeBackOut:function(h){return function(i){return (--i*i*((h+1)*i+h)+1);};},makeBackIn:function(h){return function(i){return i*i*((h+1)*i-h);};},makeBackInOut:function(h){h*=1.525;return function(i){return ((i*=2)<1)?.5*(i*i*((h+1)*i-h)):.5*((i-=2)*i*((h+1)*i+h)+2);};}};g.elasticOut=g.makeElasticOut(1,.3);g.elasticIn=g.makeElasticIn(1,.3);g.elasticInOut=g.makeElasticInOut(1,.3);g.backOut=g.makeBackOut(1.7);g.backIn=g.makeBackIn(1.7);g.backInOut=g.makeBackInOut(1.7);e.exports=g;});
__d("TypeaheadRedirectOnSelect",["copyProperties","goURI"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('goURI');function i(j){this._typeahead=j;}g(i.prototype,{_subscription:null,enable:function(){this._subscription=this._typeahead.subscribe('select',function(event,j){var k=j.selected.path;k&&h(k);});},disable:function(){this._typeahead.unsubscribe(this._subscription);this._subscription=null;}});e.exports=i;});
__d("AppCenterRightColumnController",["CSS","$","Vector","Style","DOM","event-extensions"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('$'),i=b('Vector'),j=b('Style'),k=b('DOM');b('event-extensions');var l={init:function(){this.rightColumn=h('app_center_list_right_column');this.topYOffsets=[];var m=i.getElementPosition(this.rightColumn,'viewport').y,n=k.scry(this.rightColumn,'.appCenterSmallCuratedSlot');for(var o=0;o<n.length;o++){var p=n[o];this.topYOffsets[o]=i.getElementPosition(p,'viewport').y-m;}this.topY=48;this.xOffset=i.getElementPosition(this.rightColumn).x-i.getElementPosition(this.rightColumn.parentNode).x;Event.listen(window,'scroll',this._adjustRightColumn.bind(this));Event.listen(window,'resize',this._adjustRightColumn.bind(this));this._adjustRightColumn();},_adjustRightColumn:function(){var m=false,n=i.getElementPosition(this.rightColumn.parentNode,'viewport'),o=k.scry(this.rightColumn.parentNode,'div.appsListStyleSeeAll');if(o.length===0)o=k.scry(this.rightColumn.parentNode,'div.appCenterRequestsArea');var p=i.getElementDimensions(this.rightColumn).y,q=i.getElementDimensions(o[0]).y,r=this.xOffset+n.x;for(var s=0;s<this.topYOffsets.length;s++){var t=p-this.topYOffsets[s];m=n.y<this.topY-this.topYOffsets[s]&&this.topY+t<=i.getViewportDimensions().y&&p<=q;if(m){var u=this.topY-this.topYOffsets[s];j.set(this.rightColumn,'left',r+'px');j.set(this.rightColumn,'top',u+'px');break;}}g.conditionClass(this.rightColumn,'fixed',m);if(!m){j.set(this.rightColumn,'left',null);j.set(this.rightColumn,'top',null);}}};e.exports=l;});